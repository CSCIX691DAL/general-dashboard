<ng-template #content let-modal>

  <div class="modal-header">
    <h2>List of Reports</h2>
    <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>

  <div class="modal-body">
    <div class="top">
      <div class="report-header"><h4>Reports</h4></div>
      <div class="report-content">
        <label>
          <select class="form-control reports" (change)="updateFormGroup()" [(ngModel)]="selectedReport">
            <option *ngFor="let report of reports" [ngValue]="report">{{report.name}}</option>
          </select>
        </label>
      </div>
    </div>

    <div class="middle" *ngIf="selectedReport">
      <div class="report-header"><h4>Parameters</h4></div>
      <div class="report-content" >

        <form id="reportForm" [formGroup]="paramGroup" (ngSubmit)="onSubmit()">
          <div class="input-group mb-3 input-param" *ngFor="let param of selectedReport.params">
            <div class="input-group-prepend">
              <span class="input-group-text input-field" id="inputGroup-sizing-default">{{param.name}}</span>
            </div>
            <input formControlName="{{param.name}}" type="{{param.type}}" class="form-control input-field" aria-label="Default"
                   aria-describedby="inputGroup-sizing-default"/>
          </div>
        </form>

        <span class="error-msg" *ngIf="!isFormCompleted">Please fill out all the fields</span>
      </div>
    </div>

    <div class="middle" *ngIf="selectedReport">

      <div class="report-header"><h4>Chart Type</h4></div>

      <div class="report-content" >

        <form [formGroup]="chartType" (ngSubmit)="onSubmit()">
          <label>
            <select class="form-control reports" [(ngModel)]="selectedChartType" [ngModelOptions]="{standalone: true}">
              <option *ngFor="let type of chartTypes" [ngValue]="type">{{type}}</option>
            </select>
          </label>


        </form>
      </div>
    </div>

  </div>
  <div class="modal-footer">
    <button type="button" id="exit-btn" class="btn btn-outline-dark" aria-label="Close" (click)="modal.dismiss('Cross click')">
      <span aria-hidden="true">Close</span>
    </button>
    <button type="submit" id="save-btn" form="reportForm" class="btn btn-outline-dark">Save</button>
  </div>

</ng-template>

<button class="btn btn-lg btn-outline-primary" (click)="open(content)">List of Reports</button>




